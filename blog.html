<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>我的技术美术博客</title>
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: auto; padding: 20px; }
    textarea, input { width: 100%; margin-bottom: 10px; padding: 10px; }
    .article { border-bottom: 1px solid #ddd; margin: 20px 0; }
    .article h2 { margin: 0; }
    .article time { color: #999; font-size: 0.9em; }
    #editor { display: none; }
    a { color: #3498db; text-decoration: none; }
    a:hover { text-decoration: underline; }
    button { padding: 8px 12px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>我的技术美术博客</h1>
  <button onclick="toggleEditor()">✍ 写新文章</button>
  <div id="editor">
    <input id="title" placeholder="文章标题"/>
    <textarea id="content" placeholder="支持 Markdown 格式..."></textarea>
    <button onclick="saveArticle()">保存文章</button>
  </div>

  <div id="articles"></div>

  <script>
    const articles = JSON.parse(localStorage.getItem('articles') || '[]');

    function render() {
      const container = document.getElementById('articles');
      container.innerHTML = '';
      for (let article of articles.reverse()) {
        const el = document.createElement('div');
        el.className = 'article';
        el.innerHTML = `
          <h2>${article.title}</h2>
          <time>${article.date}</time>
          <div>${marked.parse(article.content)}</div>
        `;
        container.appendChild(el);
      }
    }

    function toggleEditor() {
      document.getElementById('editor').style.display =
        document.getElementById('editor').style.display === 'none' ? 'block' : 'none';
    }

    function saveArticle() {
      const title = document.getElementById('title').value.trim();
      const content = document.getElementById('content').value.trim();
      if (!title || !content) return alert('标题和内容不能为空');
      articles.push({ title, content, date: new Date().toLocaleString() });
      localStorage.setItem('articles', JSON.stringify(articles));
      document.getElementById('title').value = '';
      document.getElementById('content').value = '';
      toggleEditor();
      render();
    }

    // 引入 marked.js 库支持 Markdown 渲染
    const script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/marked/marked.min.js';
    script.onload = render;
    document.head.appendChild(script);
  </script>
</body>
</html>
